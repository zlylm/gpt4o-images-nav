import{u as N,E as P}from"./el-button-CIiOp2O0.js";import{E as R,a as T,b as q,c as A}from"./el-form-item-D1rJY1mW.js";import{E as K}from"./el-input-BHMO1u_i.js";import{b as G,i as j,_ as H,d as M,u as J,c as E,a as C,e as O,f as h,o as p,g as $,h as S,r as x,w as t,j as Q,k as f,E as B,n as I,l as W,m as X,p as Y,q as V,s as Z,t as ee,v as o,F as se,x as ne,y as a,z as oe,A as le,B as ae,C as te,D as re,G as ie,H as g,I as ue,J as de}from"./index-vQ7QYx1H.js";import"./index-BCCM5cg2.js";import"./aria-DbMoc4mw.js";const me=G({type:{type:String,values:["primary","success","warning","info","danger","default"],default:void 0},underline:{type:[Boolean,String],values:[!0,!1,"always","never","hover"],default:void 0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:j}}),ce={click:_=>_ instanceof MouseEvent},pe=M({name:"ElLink"}),fe=M({...pe,props:me,emits:ce,setup(_,{emit:b}){const r=_,m=J("link");N({scope:"el-link",from:"The underline option (boolean)",replacement:"'always' | 'hover' | 'never'",version:"3.0.0",ref:"https://element-plus.org/en-US/component/link.html#underline"},E(()=>C(r.underline)));const n=O("link"),k=E(()=>{var e,i,l;return[n.b(),n.m((l=(i=r.type)!=null?i:(e=m.value)==null?void 0:e.type)!=null?l:"default"),n.is("disabled",r.disabled),n.is("underline",u.value==="always"),n.is("hover-underline",u.value==="hover"&&!r.disabled)]}),u=E(()=>{var e,i,l;return C(r.underline)?r.underline?"hover":"never":(l=(i=r.underline)!=null?i:(e=m.value)==null?void 0:e.underline)!=null?l:"hover"});function c(e){r.disabled||b("click",e)}return(e,i)=>(p(),h("a",{class:I(f(k)),href:e.disabled||!e.href?void 0:e.href,target:e.disabled||!e.href?void 0:e.target,onClick:c},[e.icon?(p(),$(f(B),{key:0},{default:t(()=>[(p(),$(Q(e.icon)))]),_:1})):S("v-if",!0),e.$slots.default?(p(),h("span",{key:1,class:I(f(n).e("inner"))},[x(e.$slots,"default")],2)):S("v-if",!0),e.$slots.icon?x(e.$slots,"icon",{key:2}):S("v-if",!0)],10,["href","target"]))}});var ge=H(fe,[["__file","link.vue"]]);const _e=W(ge),ve={class:"login-container"},ye={class:"background-animation"},he={class:"login-form-wrapper"},be={class:"login-form glass-card"},ke={class:"login-header"},we={class:"logo-container"},Ee={class:"logo-icon"},Se={class:"login-options"},Ve={class:"login-tips"},Ce={__name:"LoginView",setup(_){const b=oe(),r=Y(),m=V(),n=Z({username:"admin",password:"123456"}),k={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}]},u=V(!1),c=V(!1),e=async()=>{if(m.value)try{if(!await m.value.validate())return;u.value=!0,(await r.login({username:n.username,password:n.password})).success&&(c.value?localStorage.setItem("rememberedUsername",n.username):localStorage.removeItem("rememberedUsername"),b.push("/home"))}catch(l){console.error("登录失败:",l),de.error("登录失败，请稍后重试")}finally{u.value=!1}},i=l=>{const s=Math.random()*4+2,w=Math.random()*20+10,v=Math.random()*5;return{width:`${s}px`,height:`${s}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDuration:`${w}s`,animationDelay:`${v}s`}};return ee(()=>{const l=localStorage.getItem("rememberedUsername");l&&(n.username=l,c.value=!0)}),(l,s)=>{const w=B,v=K,y=q,U=A,F=_e,L=P,D=R,z=T;return p(),h("div",ve,[o("div",ye,[(p(),h(se,null,ne(50,d=>o("div",{class:"particle",key:d,style:le(i())},null,4)),64))]),o("div",he,[o("div",be,[o("div",ke,[o("div",we,[o("div",Ee,[a(w,{class:"text-4xl text-blue-400"},{default:t(()=>[a(f(ae))]),_:1})]),s[3]||(s[3]=o("h1",{class:"system-title"},"物联网路灯管理系统",-1)),s[4]||(s[4]=o("p",{class:"system-subtitle"},"IoT Streetlight Management System",-1))])]),a(D,{ref_key:"loginFormRef",ref:m,model:n,rules:k,class:"login-form-content",size:"large"},{default:t(()=>[a(y,{prop:"username"},{default:t(()=>[a(v,{modelValue:n.username,"onUpdate:modelValue":s[0]||(s[0]=d=>n.username=d),placeholder:"请输入用户名","prefix-icon":f(te),class:"login-input"},null,8,["modelValue","prefix-icon"])]),_:1}),a(y,{prop:"password"},{default:t(()=>[a(v,{modelValue:n.password,"onUpdate:modelValue":s[1]||(s[1]=d=>n.password=d),type:"password",placeholder:"请输入密码","prefix-icon":f(ie),class:"login-input","show-password":"",onKeyup:re(e,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),a(y,null,{default:t(()=>[o("div",Se,[a(U,{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=d=>c.value=d)},{default:t(()=>s[5]||(s[5]=[g("记住密码",-1)])),_:1,__:[5]},8,["modelValue"]),a(F,{type:"primary",underline:!1},{default:t(()=>s[6]||(s[6]=[g("忘记密码？",-1)])),_:1,__:[6]})])]),_:1}),a(y,null,{default:t(()=>[a(L,{type:"primary",class:"login-button",loading:u.value,onClick:e},{default:t(()=>[g(ue(u.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),o("div",Ve,[a(z,{title:"演示账号",type:"info",closable:!1,"show-icon":""},{default:t(()=>s[7]||(s[7]=[o("p",null,[g("用户名: "),o("code",null,"admin")],-1),o("p",null,[g("密码: "),o("code",null,"123456")],-1)])),_:1})])])])])}}},Fe=X(Ce,[["__scopeId","data-v-cf8b35a8"]]);export{Fe as default};
